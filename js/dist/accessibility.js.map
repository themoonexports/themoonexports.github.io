{"version":3,"file":"accessibility.js","sources":["../../react/src/components/AccessibilityWidget.tsx","../../react/src/entries/accessibility.tsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\n\ninterface A11yPreferences {\n  fontSize: number;\n  highContrast: boolean;\n  reducedMotion: boolean;\n}\n\nconst A11Y_STORAGE_KEY = 'tme_a11y_prefs';\nconst DEFAULT_FONT_SIZE = 16;\nconst FONT_STEP = 2;\nconst MIN_FONT_SIZE = 12;\nconst MAX_FONT_SIZE = 24;\n\nfunction loadPrefs(): A11yPreferences {\n  try {\n    const raw = localStorage.getItem(A11Y_STORAGE_KEY);\n    if (!raw) return { fontSize: DEFAULT_FONT_SIZE, highContrast: false, reducedMotion: false };\n    return JSON.parse(raw);\n  } catch {\n    return { fontSize: DEFAULT_FONT_SIZE, highContrast: false, reducedMotion: false };\n  }\n}\n\nfunction savePrefs(prefs: A11yPreferences): void {\n  localStorage.setItem(A11Y_STORAGE_KEY, JSON.stringify(prefs));\n}\n\nconst AccessibilityWidget: React.FC = () => {\n  const [open, setOpen] = useState(false);\n  const [prefs, setPrefs] = useState<A11yPreferences>(loadPrefs);\n\n  const applyPrefs = useCallback((p: A11yPreferences) => {\n    document.documentElement.style.fontSize = `${p.fontSize}px`;\n    document.documentElement.classList.toggle('high-contrast', p.highContrast);\n    document.documentElement.classList.toggle('reduced-motion', p.reducedMotion);\n  }, []);\n\n  useEffect(() => {\n    const saved = loadPrefs();\n    setPrefs(saved);\n    applyPrefs(saved);\n  }, [applyPrefs]);\n\n  useEffect(() => {\n    applyPrefs(prefs);\n    savePrefs(prefs);\n  }, [prefs, applyPrefs]);\n\n  const increaseFontSize = () =>\n    setPrefs((p) => ({ ...p, fontSize: Math.min(p.fontSize + FONT_STEP, MAX_FONT_SIZE) }));\n\n  const decreaseFontSize = () =>\n    setPrefs((p) => ({ ...p, fontSize: Math.max(p.fontSize - FONT_STEP, MIN_FONT_SIZE) }));\n\n  const resetFontSize = () =>\n    setPrefs((p) => ({ ...p, fontSize: DEFAULT_FONT_SIZE }));\n\n  const toggleHighContrast = () =>\n    setPrefs((p) => ({ ...p, highContrast: !p.highContrast }));\n\n  const toggleReducedMotion = () =>\n    setPrefs((p) => ({ ...p, reducedMotion: !p.reducedMotion }));\n\n  return (\n    <div className=\"accessibility-widget\">\n      <button\n        className=\"accessibility-toggle btn-icon-crafts\"\n        onClick={() => setOpen(!open)}\n        aria-expanded={open}\n        aria-label=\"Accessibility options\"\n        title=\"Accessibility\"\n      >\n        <i className=\"fas fa-universal-access\" aria-hidden=\"true\"></i>\n      </button>\n\n      {open && (\n        <div className=\"accessibility-panel card-crafts\" role=\"dialog\" aria-label=\"Accessibility settings\">\n          <h4>Accessibility</h4>\n          <div className=\"a11y-controls\">\n            <div className=\"a11y-group\">\n              <span>Font Size</span>\n              <div className=\"a11y-buttons\">\n                <button className=\"btn-icon-crafts\" onClick={decreaseFontSize} aria-label=\"Decrease font size\">A-</button>\n                <button className=\"btn-icon-crafts\" onClick={resetFontSize} aria-label=\"Reset font size\">A</button>\n                <button className=\"btn-icon-crafts\" onClick={increaseFontSize} aria-label=\"Increase font size\">A+</button>\n              </div>\n            </div>\n            <label className=\"a11y-toggle-label\">\n              <input type=\"checkbox\" checked={prefs.highContrast} onChange={toggleHighContrast} />\n              High Contrast\n            </label>\n            <label className=\"a11y-toggle-label\">\n              <input type=\"checkbox\" checked={prefs.reducedMotion} onChange={toggleReducedMotion} />\n              Reduced Motion\n            </label>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default AccessibilityWidget;\n","import React from 'react';\nimport { createRoot } from 'react-dom/client';\nimport AccessibilityWidget from '../components/AccessibilityWidget';\n\nconst mount = document.querySelector('[data-react=\"accessibility\"]');\nif (mount) {\n  createRoot(mount).render(<AccessibilityWidget />);\n}\n"],"names":["A11Y_STORAGE_KEY","DEFAULT_FONT_SIZE","FONT_STEP","MIN_FONT_SIZE","MAX_FONT_SIZE","loadPrefs","raw","savePrefs","prefs","AccessibilityWidget","open","setOpen","useState","setPrefs","applyPrefs","useCallback","p","useEffect","saved","increaseFontSize","decreaseFontSize","resetFontSize","toggleHighContrast","toggleReducedMotion","jsxs","jsx","mount","createRoot"],"mappings":"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"}
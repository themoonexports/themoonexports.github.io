{"version":3,"file":"background.js","sources":["../../react/src/components/Background.tsx","../../react/src/entries/background.tsx"],"sourcesContent":["import { useEffect } from \"react\";\n\nexport interface BackgroundProps {\n  /**\n   * Background theme variant\n   * - 'default': Standard dark background (#191919)\n   * - 'gradient': Subtle gradient from ink-900 to ink-800\n   * - 'image': Optional background image with overlay\n   */\n  variant?: \"default\" | \"gradient\" | \"image\";\n  \n  /**\n   * Optional background image URL (only used when variant=\"image\")\n   */\n  imageUrl?: string;\n  \n  /**\n   * Opacity of the image overlay (0-1)\n   */\n  overlayOpacity?: number;\n  \n  /**\n   * Custom background color (overrides variant)\n   */\n  customColor?: string;\n}\n\nexport function Background({\n  variant = \"default\",\n  imageUrl,\n  overlayOpacity = 0.85,\n  customColor\n}: BackgroundProps): JSX.Element {\n  useEffect(() => {\n    const body = document.body;\n    \n    // Reset any existing background styles\n    body.style.backgroundImage = \"\";\n    body.style.backgroundColor = \"\";\n    body.style.backgroundSize = \"\";\n    body.style.backgroundPosition = \"\";\n    body.style.backgroundAttachment = \"\";\n    body.style.backgroundRepeat = \"\";\n    \n    // Apply custom color if provided\n    if (customColor) {\n      body.style.backgroundColor = customColor;\n      return;\n    }\n    \n    // Apply variant-specific styles\n    switch (variant) {\n      case \"gradient\":\n        body.style.background = \"linear-gradient(to bottom, var(--tmx-ink-900, #0F0F0F), var(--tmx-ink-800, #1A1A1A))\";\n        break;\n        \n      case \"image\":\n        if (imageUrl) {\n          body.style.backgroundImage = `\n            linear-gradient(\n              rgba(25, 25, 25, ${overlayOpacity}),\n              rgba(25, 25, 25, ${overlayOpacity})\n            ),\n            url(${imageUrl})\n          `;\n          body.style.backgroundSize = \"cover\";\n          body.style.backgroundPosition = \"center\";\n          body.style.backgroundAttachment = \"fixed\";\n          body.style.backgroundRepeat = \"no-repeat\";\n        } else {\n          body.style.backgroundColor = \"#191919\";\n        }\n        break;\n        \n      case \"default\":\n      default:\n        body.style.backgroundColor = \"#191919\";\n        break;\n    }\n    \n    // Cleanup: reset to default on unmount\n    return () => {\n      body.style.backgroundColor = \"#191919\";\n      body.style.backgroundImage = \"\";\n    };\n  }, [variant, imageUrl, overlayOpacity, customColor]);\n  \n  // This component doesn't render anything visible\n  return <></>;\n}\n","import { hydrateRoot } from \"react-dom/client\";\nimport { Background, BackgroundProps } from \"@components/Background\";\n\n/**\n * Hydrate the Background component into the document\n * Can be configured via data attributes or window object\n */\nfunction initBackground() {\n  // Check if background component should be mounted\n  const mountPoint = document.querySelector('[data-react=\"background\"]');\n  \n  if (mountPoint) {\n    // Read configuration from data attributes\n    const variant = (mountPoint.getAttribute(\"data-variant\") || \"default\") as BackgroundProps[\"variant\"];\n    const imageUrl = mountPoint.getAttribute(\"data-image-url\") || undefined;\n    const overlayOpacity = parseFloat(mountPoint.getAttribute(\"data-overlay-opacity\") || \"0.85\");\n    const customColor = mountPoint.getAttribute(\"data-custom-color\") || undefined;\n    \n    hydrateRoot(\n      mountPoint,\n      <Background\n        variant={variant}\n        imageUrl={imageUrl}\n        overlayOpacity={overlayOpacity}\n        customColor={customColor}\n      />\n    );\n  } else {\n    // No mount point found, create one and append to body\n    const container = document.createElement(\"div\");\n    container.setAttribute(\"data-react\", \"background\");\n    container.style.display = \"none\"; // Component manages body styles, no need to display\n    document.body.appendChild(container);\n    \n    // Use default configuration or read from window object\n    const config = (window as any).TheMoonExports?.backgroundConfig || {};\n    \n    hydrateRoot(\n      container,\n      <Background\n        variant={config.variant || \"default\"}\n        imageUrl={config.imageUrl}\n        overlayOpacity={config.overlayOpacity}\n        customColor={config.customColor}\n      />\n    );\n  }\n}\n\n// Initialize when DOM is ready\nif (document.readyState === \"loading\") {\n  document.addEventListener(\"DOMContentLoaded\", initBackground);\n} else {\n  initBackground();\n}\n\nexport { Background };\n"],"names":["Background","variant","imageUrl","overlayOpacity","customColor","useEffect","body","jsx","Fragment","initBackground","mountPoint","hydrateRoot","container","config","_a"],"mappings":"sGA2BO,SAASA,EAAW,CACzB,QAAAC,EAAU,UACV,SAAAC,EACA,eAAAC,EAAiB,IACjB,YAAAC,CACF,EAAiC,CAC/BC,OAAAA,EAAAA,UAAU,IAAM,CACd,MAAMC,EAAO,SAAS,KAWtB,GARAA,EAAK,MAAM,gBAAkB,GAC7BA,EAAK,MAAM,gBAAkB,GAC7BA,EAAK,MAAM,eAAiB,GAC5BA,EAAK,MAAM,mBAAqB,GAChCA,EAAK,MAAM,qBAAuB,GAClCA,EAAK,MAAM,iBAAmB,GAG1BF,EAAa,CACfE,EAAK,MAAM,gBAAkBF,EAC7B,MACF,CAGA,OAAQH,EAAA,CACN,IAAK,WACHK,EAAK,MAAM,WAAa,uFACxB,MAEF,IAAK,QACCJ,GACFI,EAAK,MAAM,gBAAkB;AAAA;AAAA,iCAENH,CAAc;AAAA,iCACdA,CAAc;AAAA;AAAA,kBAE7BD,CAAQ;AAAA,YAEhBI,EAAK,MAAM,eAAiB,QAC5BA,EAAK,MAAM,mBAAqB,SAChCA,EAAK,MAAM,qBAAuB,QAClCA,EAAK,MAAM,iBAAmB,aAE9BA,EAAK,MAAM,gBAAkB,UAE/B,MAEF,IAAK,UACL,QACEA,EAAK,MAAM,gBAAkB,UAC7B,KAAA,CAIJ,MAAO,IAAM,CACXA,EAAK,MAAM,gBAAkB,UAC7BA,EAAK,MAAM,gBAAkB,EAC/B,CACF,EAAG,CAACL,EAASC,EAAUC,EAAgBC,CAAW,CAAC,EAG5CG,EAAAA,IAAAC,EAAAA,SAAA,EAAE,CACX,CClFA,SAASC,GAAiB,OAExB,MAAMC,EAAa,SAAS,cAAc,2BAA2B,EAErE,GAAIA,EAAY,CAEd,MAAMT,EAAWS,EAAW,aAAa,cAAc,GAAK,UACtDR,EAAWQ,EAAW,aAAa,gBAAgB,GAAK,OACxDP,EAAiB,WAAWO,EAAW,aAAa,sBAAsB,GAAK,MAAM,EACrFN,EAAcM,EAAW,aAAa,mBAAmB,GAAK,OAEpEC,EACED,EACAH,EAAAA,IAACP,EAAA,CACC,QAAAC,EACA,SAAAC,EACA,eAAAC,EACA,YAAAC,CAAA,CAAA,CACF,CAEJ,KAAO,CAEL,MAAMQ,EAAY,SAAS,cAAc,KAAK,EAC9CA,EAAU,aAAa,aAAc,YAAY,EACjDA,EAAU,MAAM,QAAU,OAC1B,SAAS,KAAK,YAAYA,CAAS,EAGnC,MAAMC,IAAUC,EAAA,OAAe,iBAAf,YAAAA,EAA+B,mBAAoB,CAAA,EAEnEH,EACEC,EACAL,EAAAA,IAACP,EAAA,CACC,QAASa,EAAO,SAAW,UAC3B,SAAUA,EAAO,SACjB,eAAgBA,EAAO,eACvB,YAAaA,EAAO,WAAA,CAAA,CACtB,CAEJ,CACF,CAGI,SAAS,aAAe,UAC1B,SAAS,iBAAiB,mBAAoBJ,CAAc,EAE5DA,EAAA"}
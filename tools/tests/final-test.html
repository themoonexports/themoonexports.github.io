<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Final Fix Test - The Moon Exports</title>
    <!-- Bootstrap CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link href="css/one.css" rel="stylesheet">
    <link href="css/dropdown-social.css" rel="stylesheet">
    <link href="css/crafts-ui.css" rel="stylesheet">
    <!-- Font Awesome - Multiple Sources for Maximum Reliability -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.5.0/css/all.css" crossorigin="anonymous" />
    
    <style>
        body { padding: 20px; }
        .test-section { 
            margin: 30px 0; 
            padding: 20px; 
            border: 2px solid #ccc; 
            border-radius: 8px; 
        }
        .pass { color: green; font-weight: bold; }
        .fail { color: red; font-weight: bold; }
        .navbar { margin-bottom: 20px; }
        .socialm a { 
            margin-right: 10px; 
            font-size: 24px; 
            color: #333; 
            text-decoration: none; 
        }
        .caret-test {
            padding: 10px;
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîß Final Fix Test - The Moon Exports</h1>
        <p>Testing the corrected Font Awesome integration and Bootstrap caret functionality.</p>
        
        <!-- Navbar Dropdown Test -->
        <div class="test-section">
            <h2>üéØ Navbar Dropdown Caret Test</h2>
            
            <nav class="navbar navbar-default">
                <div class="container-fluid">
                    <ul class="nav navbar-nav">
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
                                Handicrafts <span class="caret"></span>
                            </a>
                            <ul class="dropdown-menu">
                                <li><a href="#">Horn Crafts</a></li>
                                <li><a href="#">Wooden Crafts</a></li>
                                <li><a href="#">Resin Products</a></li>
                            </ul>
                        </li>
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
                                Services <span class="caret"></span>
                            </a>
                            <ul class="dropdown-menu">
                                <li><a href="#">Custom Design</a></li>
                                <li><a href="#">Wholesale</a></li>
                                <li><a href="#">Export</a></li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </nav>
            
            <div class="caret-test">
                <p><strong>Direct Caret Elements:</strong></p>
                <span class="caret"></span> This should be a downward triangle
                <br><br>
                <button type="button" class="btn btn-default dropdown-toggle">
                    Dropdown <span class="caret"></span>
                </button>
            </div>
            
            <div id="caret-status" class="alert alert-info">
                ‚è≥ Testing caret visibility...
            </div>
        </div>
        
        <!-- Social Media Icons Test -->
        <div class="test-section">
            <h2>üì± Social Media Icons Test</h2>
            
            <div class="socialm">
                <a href="#" title="Facebook"><i class="fab fa-facebook-f" aria-hidden="true"></i> Facebook</a>
                <a href="#" title="Twitter"><i class="fab fa-twitter" aria-hidden="true"></i> Twitter</a>
                <a href="#" title="Instagram"><i class="fab fa-instagram" aria-hidden="true"></i> Instagram</a>
                <a href="#" title="Pinterest"><i class="fab fa-pinterest-p" aria-hidden="true"></i> Pinterest</a>
                <a href="#" title="LinkedIn"><i class="fab fa-linkedin-in" aria-hidden="true"></i> LinkedIn</a>
            </div>
            
            <div id="icons-status" class="alert alert-info">
                ‚è≥ Testing icon rendering...
            </div>
        </div>
        
        <!-- Font Loading Diagnostic -->
        <div class="test-section">
            <h2>üî§ Font Loading Diagnostic</h2>
            
            <div style="font-family: 'Font Awesome 6 Brands'; font-size: 24px; margin: 10px 0;">
                <span style="margin-right: 10px;">&#xf09a;</span> <!-- Facebook -->
                <span style="margin-right: 10px;">&#xf099;</span> <!-- Twitter -->
                <span style="margin-right: 10px;">&#xf16d;</span> <!-- Instagram -->
                <span style="margin-right: 10px;">&#xf0d2;</span> <!-- Pinterest -->
                <span style="margin-right: 10px;">&#xf08c;</span> <!-- LinkedIn -->
            </div>
            
            <div id="font-status" class="alert alert-info">
                ‚è≥ Checking font loading...
            </div>
        </div>
        
        <!-- Results Summary -->
        <div class="test-section">
            <h2>üìä Fix Status Summary</h2>
            <div id="summary" class="alert alert-info">
                ‚è≥ Running comprehensive tests...
            </div>
        </div>
    </div>
    
    <!-- Scripts -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    
    <script>
    $(document).ready(function() {
        // Test dropdown hover functionality
        $('.navbar-default .navbar-nav > li.dropdown').hover(function() {
            $('ul.dropdown-menu', this).stop(true, true).slideDown('fast');
            $(this).addClass('open');
        }, function() {
            $('ul.dropdown-menu', this).stop(true, true).slideUp('fast');
            $(this).removeClass('open');
        });
        
        // Run tests after page load
        setTimeout(function() {
            runComprehensiveTests();
        }, 1000);
    });
    
    function runComprehensiveTests() {
        let caretPass = false;
        let iconsPass = false;
        let fontPass = false;
        
        // Test 1: Check Caret Visibility
        const caret = $('.caret').first();
        if (caret.length > 0) {
            const caretStyles = window.getComputedStyle(caret[0]);
            const hasTriangle = caretStyles.borderTopWidth && 
                              caretStyles.borderTopWidth !== '0px' &&
                              caretStyles.borderTopColor &&
                              caretStyles.borderTopColor !== 'transparent';
            
            if (hasTriangle) {
                $('#caret-status').removeClass('alert-info').addClass('alert-success')
                    .html('‚úÖ <strong>FIXED:</strong> Bootstrap carets are displaying correctly as triangular arrows!');
                caretPass = true;
            } else {
                $('#caret-status').removeClass('alert-info').addClass('alert-danger')
                    .html('‚ùå <strong>ISSUE:</strong> Carets are not displaying correctly.');
            }
        }
        
        // Test 2: Check Social Media Icons
        const icon = $('.fab').first();
        if (icon.length > 0) {
            const iconStyles = window.getComputedStyle(icon[0], '::before');
            const fontFamily = iconStyles.fontFamily;
            const content = iconStyles.content;
            
            const hasFontAwesome = fontFamily && (
                fontFamily.includes('Font Awesome') || 
                fontFamily.includes('FontAwesome')
            );
            const hasContent = content && content !== 'none' && content !== '""';
            
            if (hasFontAwesome && hasContent) {
                $('#icons-status').removeClass('alert-info').addClass('alert-success')
                    .html('‚úÖ <strong>FIXED:</strong> Social media icons are rendering properly!');
                iconsPass = true;
            } else {
                $('#icons-status').removeClass('alert-info').addClass('alert-danger')
                    .html('‚ùå <strong>ISSUE:</strong> Icons not rendering - Font: ' + fontFamily + ', Content: ' + content);
            }
        }
        
        // Test 3: Check Font Loading
        document.fonts.ready.then(function() {
            const fontAwesome6Check = document.fonts.check('1em "Font Awesome 6 Brands"');
            const fontAwesome5Check = document.fonts.check('1em "Font Awesome 5 Brands"');
            const fontAwesomeCheck = document.fonts.check('1em FontAwesome');
            
            if (fontAwesome6Check || fontAwesome5Check || fontAwesomeCheck) {
                $('#font-status').removeClass('alert-info').addClass('alert-success')
                    .html('‚úÖ <strong>LOADED:</strong> Font Awesome fonts are loaded and available!');
                fontPass = true;
            } else {
                $('#font-status').removeClass('alert-info').addClass('alert-warning')
                    .html('‚ö†Ô∏è <strong>WARNING:</strong> Font Awesome fonts may not be fully loaded.');
            }
            
            // Generate summary
            generateSummary(caretPass, iconsPass, fontPass);
        });
    }
    
    function generateSummary(caretPass, iconsPass, fontPass) {
        const totalTests = 3;
        const passedTests = (caretPass ? 1 : 0) + (iconsPass ? 1 : 0) + (fontPass ? 1 : 0);
        
        let summaryClass = 'alert-success';
        let summaryIcon = '‚úÖ';
        let summaryTitle = 'ALL SYSTEMS WORKING';
        
        if (passedTests < totalTests) {
            if (passedTests === 0) {
                summaryClass = 'alert-danger';
                summaryIcon = '‚ùå';
                summaryTitle = 'CRITICAL ISSUES DETECTED';
            } else {
                summaryClass = 'alert-warning';
                summaryIcon = '‚ö†Ô∏è';
                summaryTitle = 'PARTIAL FIX APPLIED';
            }
        }
        
        $('#summary').removeClass('alert-info').addClass(summaryClass).html(`
            <h3>${summaryIcon} <strong>${summaryTitle}</strong></h3>
            <p>Test Results: ${passedTests}/${totalTests} components working correctly</p>
            <ul>
                <li>Bootstrap Carets: ${caretPass ? '‚úÖ Working' : '‚ùå Not Working'}</li>
                <li>Social Media Icons: ${iconsPass ? '‚úÖ Working' : '‚ùå Not Working'}</li>
                <li>Font Loading: ${fontPass ? '‚úÖ Working' : '‚ö†Ô∏è Check Required'}</li>
            </ul>
            ${passedTests === totalTests ? 
                '<p><strong>üéâ The Font Awesome and Bootstrap integration issue has been successfully resolved!</strong></p>' : 
                '<p><strong>‚öôÔ∏è Additional fixes may be required. Check the individual test results above.</strong></p>'
            }
        `);
    }
    </script>
</body>
</html>
